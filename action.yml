name: 'Resolve Latest Docker Digests'
description: 'Resolves Docker image digests from any container registry for multiple images'
author: 'Optivem'
branding:
  icon: 'search'
  color: 'blue'
inputs:
  image-urls:
    description: 'JSON array of image URLs to resolve digests for (e.g., ["nginx:latest", "ghcr.io/owner/repo/image:latest"])'
    required: true
outputs:
  digests:
    description: 'JSON object mapping image URLs to their resolved SHA256 digests'
    value: ${{ steps.get-digests.outputs.digests }}
runs:
  using: 'composite'
  steps:
    - name: Resolve image digests
      id: get-digests
      shell: pwsh
      run: |
        & "${{ github.action_path }}/action.ps1" -ImagesJson '${{ inputs.image-urls }}'
